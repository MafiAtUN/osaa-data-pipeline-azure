# Azure Container Instances deployment configuration
apiVersion: 2021-03-01
location: eastus
name: osaa-mvp-azure
properties:
  containers:
  - name: osaa-mvp
    properties:
      image: osaa-mvp-azure:latest
      resources:
        requests:
          cpu: 2
          memoryInGb: 4
      ports:
      - port: 8080
        protocol: TCP
      environmentVariables:
      - name: AZURE_STORAGE_CONNECTION_STRING
        value: "DefaultEndpointsProtocol=https;AccountName=yourstorageaccount;AccountKey=yourkey==;EndpointSuffix=core.windows.net"
      - name: AZURE_STORAGE_CONTAINER_NAME
        value: "osaa-data-pipeline"
      - name: ENABLE_AZURE_UPLOAD
        value: "true"
      - name: TARGET
        value: "prod"
      - name: GATEWAY
        value: "local"
      - name: DB_PATH
        value: "/app/sqlMesh/unosaa_data_pipeline.db"
      - name: UI_PORT
        value: "8080"
  osType: Linux
  restartPolicy: Always
  ipAddress:
    type: Public
    ports:
    - protocol: TCP
      port: 8080
    dnsNameLabel: osaa-mvp-azure
tags:
  environment: production
  project: osaa-mvp
